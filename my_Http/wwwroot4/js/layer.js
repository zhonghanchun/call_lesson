/*

 @Name：layer v2.1 弹层组件
 @Author：贤心
 @Site：http://layer.layui.com
 @License：LGPL
        
 */
!function(h,f){var a,g,e={getPath:function(){var i=document.scripts,k=i[i.length-1],j=k.src;if(k.getAttribute("merge")){return}return j.substring(0,j.lastIndexOf("/")+1)}(),enter:function(i){if(i.keyCode===13){i.preventDefault()}},config:{},end:{},btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],type:["dialog","page","iframe","loading","tips"]};var d={v:"2.1",ie6:!!h.ActiveXObject&&!h.XMLHttpRequest,index:0,path:e.getPath,config:function(l,i){var j=0;l=l||{};d.cache=e.config=a.extend(e.config,l);d.path=e.config.path||d.path;typeof l.extend==="string"&&(l.extend=[l.extend]);d.use("skin/layer.css",(l.extend&&l.extend.length>0)?(function k(){var m=l.extend;d.use(m[m[j]?j:j-1],j<m.length?function(){++j;return k}():i)}()):i);return this},use:function(o,j,r){var l=0,k=a("head")[0];var o=o.replace(/\s/g,"");var n=/\.css$/.test(o);var p=document.createElement(n?"link":"script");var m="layui_layer_"+o.replace(/\.|\//g,"");if(!d.path){return}if(n){p.rel="stylesheet"}p[n?"href":"src"]=/^http:\/\//.test(o)?o:d.path+o;p.id=m;if(!a("#"+m)[0]){k.appendChild(p)}(function q(){(n?parseInt(a("#"+m).css("width"))===1989:d[r||m])?function(){j&&j();try{n||k.removeChild(p)}catch(i){}}():setTimeout(q,100)}());return this},ready:function(j,i){var k=typeof j==="function";if(k){i=j}d.config(a.extend(e.config,function(){return k?{}:{path:j}}()),i);return this},alert:function(i,j,l){var k=typeof j==="function";if(k){l=j}return d.open(a.extend({content:i,yes:l},k?{}:j))},confirm:function(j,k,m,i){var l=typeof k==="function";if(l){i=m;m=k}return d.open(a.extend({content:j,btn:e.btn,yes:m,cancel:i},l?{}:k))},msg:function(i,k,j){var o=typeof k==="function",l=e.config.skin;var n=(l?l+" "+l+"-msg":"")||"layui-layer-msg";var m=c.anim.length-1;if(o){j=k}return d.open(a.extend({content:i,time:3000,shade:false,skin:n,title:false,closeBtn:false,btn:false,end:j},(o&&!e.config.skin)?{skin:n+" layui-layer-hui",shift:m}:function(){k=k||{};if(k.icon===-1||k.icon===f&&!e.config.skin){k.skin=n+" "+(k.skin||"layui-layer-hui")}return k}()))},load:function(i,j){return d.open(a.extend({type:3,icon:i||0,shade:0.01},j))},tips:function(i,j,k){return d.open(a.extend({type:4,content:[i,j],closeBtn:false,time:3000,maxWidth:210},k))}};var b=function(i){var j=this;j.index=++d.index;j.config=a.extend({},j.config,e.config,i);j.creat()};b.pt=b.prototype;var c=["layui-layer",".layui-layer-title",".layui-layer-main",".layui-layer-dialog","layui-layer-iframe","layui-layer-content","layui-layer-btn","layui-layer-close"];c.anim=["layui-anim","layui-anim-01","layui-anim-02","layui-anim-03","layui-anim-04","layui-anim-05","layui-anim-06"];b.pt.config={type:0,shade:0.3,fix:true,move:c[1],title:"&#x4FE1;&#x606F;",offset:"auto",area:"auto",closeBtn:1,time:0,zIndex:19891014,maxWidth:360,shift:0,icon:-1,scrollbar:true,tips:2};b.pt.vessel=function(k,i){var m=this,n=m.index,j=m.config;var q=j.zIndex+n,p=typeof j.title==="object";var l=j.maxmin&&(j.type===1||j.type===2);var o=(j.title?'<div class="layui-layer-title" style="'+(p?j.title[1]:"")+'">'+(p?j.title[0]:j.title)+"</div>":"");j.zIndex=q;i([j.shade?('<div class="layui-layer-shade" id="layui-layer-shade'+n+'" times="'+n+'" style="'+("z-index:"+(q-1)+"; background-color:"+(j.shade[1]||"#000")+"; opacity:"+(j.shade[0]||j.shade)+"; filter:alpha(opacity="+(j.shade[0]*100||j.shade*100)+");")+'"></div>'):"",'<div class="'+c[0]+" "+(c.anim[j.shift]||"")+(" layui-layer-"+e.type[j.type])+(((j.type==0||j.type==2)&&!j.shade)?" layui-layer-border":"")+" "+(j.skin||"")+'" id="'+c[0]+n+'" type="'+e.type[j.type]+'" times="'+n+'" showtime="'+j.time+'" conType="'+(k?"object":"string")+'" style="z-index: '+q+"; width:"+j.area[0]+";height:"+j.area[1]+(j.fix?"":";position:absolute;")+'">'+(k&&j.type!=2?"":o)+'<div class="layui-layer-content'+((j.type==0&&j.icon!==-1)?" layui-layer-padding":"")+(j.type==3?" layui-layer-loading"+j.icon:"")+'">'+(j.type==0&&j.icon!==-1?'<i class="layui-layer-ico layui-layer-ico'+j.icon+'"></i>':"")+(j.type==1&&k?"":(j.content||""))+'</div><span class="layui-layer-setwin">'+function(){var r=l?'<a class="layui-layer-min" href="javascript:;"><cite></cite></a><a class="layui-layer-ico layui-layer-max" href="javascript:;"></a>':"";j.closeBtn&&(r+='<a class="layui-layer-ico '+c[7]+" "+c[7]+(j.title?j.closeBtn:(j.type==4?"1":"2"))+'" href="javascript:;"></a>');return r}()+"</span>"+(j.btn?function(){var r="";typeof j.btn==="string"&&(j.btn=[j.btn]);for(var s=0,t=j.btn.length;s<t;s++){r+='<a class="'+c[6]+""+s+'">'+j.btn[s]+"</a>"}return'<div class="'+c[6]+'">'+r+"</div>"}():"")+"</div>"],o);return m};b.pt.creat=function(){var m=this,i=m.config,n=m.index,l;var j=i.content,k=typeof j==="object";if(typeof i.area==="string"){i.area=i.area==="auto"?["",""]:[i.area,""]}switch(i.type){case 0:i.btn=("btn" in i)?i.btn:e.btn[0];d.closeAll("dialog");break;case 2:var j=i.content=k?i.content:[i.content||"http://layer.layui.com","auto"];i.content='<iframe scrolling="'+(i.content[1]||"auto")+'" allowtransparency="true" id="'+c[4]+""+n+'" name="'+c[4]+""+n+'" onload="this.className=\'\';" class="layui-layer-load" frameborder="0" src="'+i.content[0]+'"></iframe>';break;case 3:i.title=false;i.closeBtn=false;i.icon===-1&&(i.icon===0);d.closeAll("loading");break;case 4:k||(i.content=[i.content,"body"]);i.follow=i.content[1];i.content=i.content[0]+'<i class="layui-layer-TipsG"></i>';i.title=false;i.shade=false;i.fix=false;i.tips=typeof i.tips==="object"?i.tips:[i.tips,true];i.tipsMore||d.closeAll("tips");break}m.vessel(k,function(o,p){a("body").append(o[0]);k?function(){(i.type==2||i.type==4)?function(){a("body").append(o[1])}():function(){if(!j.parents("."+c[0])[0]){j.show().addClass("layui-layer-wrap").wrap(o[1]);a("#"+c[0]+n).find("."+c[5]).before(p)}}()}():a("body").append(o[1]);m.layero=a("#"+c[0]+n);i.scrollbar||c.html.css("overflow","hidden").attr("layer-full",n)}).auto(n);i.type==2&&d.ie6&&m.layero.find("iframe").attr("src",j[0]);a(document).off("keydown",e.enter).on("keydown",e.enter);m.layero.on("keydown",function(o){a(document).off("keydown",e.enter)});i.type==4?m.tips():m.offset();if(i.fix){g.on("resize",function(){m.offset();(/^\d+%$/.test(i.area[0])||/^\d+%$/.test(i.area[1]))&&m.auto(n);i.type==4&&m.tips()})}i.time<=0||setTimeout(function(){d.close(m.index)},i.time);m.move().callback()};b.pt.auto=function(l){var o=this,k=o.config,m=a("#"+c[0]+l);if(k.area[0]===""&&k.maxWidth>0){if(/MSIE 7/.test(navigator.userAgent)&&k.btn){m.width(m.innerWidth())}m.outerWidth()>k.maxWidth&&m.width(k.maxWidth)}var i=[m.innerWidth(),m.innerHeight()];var p=m.find(c[1]).outerHeight()||0;var j=m.find("."+c[6]).outerHeight()||0;function n(q){q=m.find(q);q.height(i[1]-p-j-2*(parseFloat(q.css("padding"))|0))}switch(k.type){case 2:n("iframe");break;default:if(k.area[1]===""){if(k.fix&&i[1]>=g.height()){i[1]=g.height();n("."+c[5])}}else{n("."+c[5])}break}return o};b.pt.offset=function(){var l=this,j=l.config,k=l.layero;var i=[k.outerWidth(),k.outerHeight()];var m=typeof j.offset==="object";l.offsetTop=(g.height()-i[1])/2;l.offsetLeft=(g.width()-i[0])/2;if(m){l.offsetTop=j.offset[0];l.offsetLeft=j.offset[1]||l.offsetLeft}else{if(j.offset!=="auto"){l.offsetTop=j.offset;if(j.offset==="rb"){l.offsetTop=g.height()-i[1];l.offsetLeft=g.width()-i[0]}}}if(!j.fix){l.offsetTop=/%$/.test(l.offsetTop)?g.height()*parseFloat(l.offsetTop)/100:parseFloat(l.offsetTop);l.offsetLeft=/%$/.test(l.offsetLeft)?g.width()*parseFloat(l.offsetLeft)/100:parseFloat(l.offsetLeft);l.offsetTop+=g.scrollTop();l.offsetLeft+=g.scrollLeft()}k.css({top:l.offsetTop,left:l.offsetLeft})};b.pt.tips=function(){var o=this,i=o.config,n=o.layero;var m=[n.outerWidth(),n.outerHeight()],j=a(i.follow);if(!j[0]){j=a("body")}var k={width:j.outerWidth(),height:j.outerHeight(),top:j.offset().top,left:j.offset().left},p=n.find(".layui-layer-TipsG");var l=i.tips[0];i.tips[1]||p.remove();k.autoLeft=function(){if(k.left+m[0]-g.width()>0){k.tipLeft=k.left+k.width-m[0];p.css({right:12,left:"auto"})}else{k.tipLeft=k.left}};k.where=[function(){k.autoLeft();k.tipTop=k.top-m[1]-10;p.removeClass("layui-layer-TipsB").addClass("layui-layer-TipsT").css("border-right-color",i.tips[1])},function(){k.tipLeft=k.left+k.width+10;k.tipTop=k.top;p.removeClass("layui-layer-TipsL").addClass("layui-layer-TipsR").css("border-bottom-color",i.tips[1])},function(){k.autoLeft();k.tipTop=k.top+k.height+10;p.removeClass("layui-layer-TipsT").addClass("layui-layer-TipsB").css("border-right-color",i.tips[1])},function(){k.tipLeft=k.left-m[0]-10;k.tipTop=k.top;p.removeClass("layui-layer-TipsR").addClass("layui-layer-TipsL").css("border-bottom-color",i.tips[1])}];k.where[l-1]();if(l===1){k.top-(g.scrollTop()+m[1]+8*2)<0&&k.where[2]()}else{if(l===2){g.width()-(k.left+k.width+m[0]+8*2)>0||k.where[3]()}else{if(l===3){(k.top-g.scrollTop()+k.height+m[1]+8*2)-g.height()>0&&k.where[0]()}else{if(l===4){m[0]+8*2-k.left>0&&k.where[1]()}}}}n.find("."+c[5]).css({"background-color":i.tips[1],"padding-right":(i.closeBtn?"30px":"")});n.css({left:k.tipLeft,top:k.tipTop})};b.pt.move=function(){var l=this,j=l.config,i={setY:0,moveLayer:function(){var m=i.layero,o=parseInt(m.css("margin-left"));var n=parseInt(i.move.css("left"));o===0||(n=n-o);if(m.css("position")!=="fixed"){n=n-m.parent().offset().left;i.setY=0}m.css({left:n,top:parseInt(i.move.css("top"))-i.setY})}};var k=l.layero.find(j.move);j.move&&k.attr("move","ok");k.css({cursor:j.move?"move":"auto"});a(j.move).on("mousedown",function(n){n.preventDefault();if(a(this).attr("move")==="ok"){i.ismove=true;i.layero=a(this).parents("."+c[0]);var p=i.layero.offset().left,q=i.layero.offset().top,o=i.layero.outerWidth()-6,m=i.layero.outerHeight()-6;if(!a("#layui-layer-moves")[0]){a("body").append('<div id="layui-layer-moves" class="layui-layer-moves" style="left:'+p+"px; top:"+q+"px; width:"+o+"px; height:"+m+'px; z-index:2147483584"></div>')}i.move=a("#layui-layer-moves");j.moveType&&i.move.css({visibility:"hidden"});i.moveX=n.pageX-i.move.position().left;i.moveY=n.pageY-i.move.position().top;i.layero.css("position")!=="fixed"||(i.setY=g.scrollTop())}});a(document).mousemove(function(m){if(i.ismove){var n=m.pageX-i.moveX,o=m.pageY-i.moveY;m.preventDefault();if(!j.moveOut){i.setY=g.scrollTop();var p=g.width()-i.move.outerWidth(),q=i.setY;n<0&&(n=0);n>p&&(n=p);o<q&&(o=q);o>g.height()-i.move.outerHeight()+i.setY&&(o=g.height()-i.move.outerHeight()+i.setY)}i.move.css({left:n,top:o});j.moveType&&i.moveLayer();n=o=p=q=null}}).mouseup(function(){try{if(i.ismove){i.moveLayer();i.move.remove();j.moveEnd&&j.moveEnd()}i.ismove=false}catch(m){i.ismove=false}});return l};b.pt.callback=function(){var l=this,k=l.layero,j=l.config;l.openLayer();if(j.success){if(j.type==2){k.find("iframe").on("load",function(){j.success(k,l.index)})}else{j.success(k,l.index)}}d.ie6&&l.IE6(k);k.find("."+c[6]).children("a").on("click",function(){var m=a(this).index();j["btn"+(m+1)]&&j["btn"+(m+1)](l.index,k);if(m===0){j.yes?j.yes(l.index,k):d.close(l.index)}else{if(m===1){i()}else{j["btn"+(m+1)]||d.close(l.index)}}});function i(){var m=j.cancel&&j.cancel(l.index);m===false||d.close(l.index)}k.find("."+c[7]).on("click",i);if(j.shadeClose){a("#layui-layer-shade"+l.index).on("click",function(){d.close(l.index)})}k.find(".layui-layer-min").on("click",function(){d.min(l.index,j);j.min&&j.min(k)});k.find(".layui-layer-max").on("click",function(){if(a(this).hasClass("layui-layer-maxmin")){d.restore(l.index);j.restore&&j.restore(k)}else{d.full(l.index,j);j.full&&j.full(k)}});j.end&&(e.end[l.index]=j.end)};e.reselect=function(){a.each(a("select"),function(i,k){var j=a(this);if(!j.parents("."+c[0])[0]){(j.attr("layer")==1&&a("."+c[0]).length<1)&&j.removeAttr("layer").show()}j=null})};b.pt.IE6=function(k){var l=this,i=k.offset().top;function j(){k.css({top:i+(l.config.fix?g.scrollTop():0)})}j();g.scroll(j);a("select").each(function(m,o){var n=a(this);if(!n.parents("."+c[0])[0]){n.css("display")==="none"||n.attr({layer:"1"}).hide()}n=null})};b.pt.openLayer=function(){var i=this;d.zIndex=i.config.zIndex;d.setTop=function(j){var k=function(){d.zIndex++;j.css("z-index",d.zIndex+1)};d.zIndex=parseInt(j[0].style.zIndex);j.on("mousedown",k);return d.zIndex}};e.record=function(j){var i=[j.outerWidth(),j.outerHeight(),j.position().top,j.position().left+parseFloat(j.css("margin-left"))];j.find(".layui-layer-max").addClass("layui-layer-maxmin");j.attr({area:i})};e.rescollbar=function(i){if(c.html.attr("layer-full")==i){if(c.html[0].style.removeProperty){c.html[0].style.removeProperty("overflow")}else{c.html[0].style.removeAttribute("overflow")}c.html.removeAttr("layer-full")}};h.layer=d;d.getChildFrame=function(j,i){i=i||a("."+c[4]).attr("times");return a("#"+c[0]+i).find("iframe").contents().find(j)};d.getFrameIndex=function(i){return a("#"+i).parents("."+c[4]).attr("times")};d.iframeAuto=function(k){if(!k){return}var j=d.getChildFrame("html",k).outerHeight();var l=a("#"+c[0]+k);var m=l.find(c[1]).outerHeight()||0;var i=l.find("."+c[6]).outerHeight()||0;l.css({height:j+m+i});l.find("iframe").css({height:j})};d.iframeSrc=function(i,j){a("#"+c[0]+i).find("iframe").attr("src",j)};d.style=function(j,l){var k=a("#"+c[0]+j),n=k.attr("type");var m=k.find(c[1]).outerHeight()||0;var i=k.find("."+c[6]).outerHeight()||0;if(n===e.type[1]||n===e.type[2]){k.css(l);if(n===e.type[2]){k.find("iframe").css({height:parseFloat(l.height)-m-i})}}};d.min=function(i,k){var j=a("#"+c[0]+i);var l=j.find(c[1]).outerHeight()||0;e.record(j);d.style(i,{width:180,height:l,overflow:"hidden"});j.find(".layui-layer-min").hide();j.attr("type")==="page"&&j.find(c[4]).hide();e.rescollbar(i)};d.restore=function(j){var k=a("#"+c[0]+j),i=k.attr("area").split(",");var l=k.attr("type");d.style(j,{width:parseFloat(i[0]),height:parseFloat(i[1]),top:parseFloat(i[2]),left:parseFloat(i[3]),overflow:"visible"});k.find(".layui-layer-max").removeClass("layui-layer-maxmin");k.find(".layui-layer-min").show();k.attr("type")==="page"&&k.find(c[4]).show();e.rescollbar(j)};d.full=function(i){var j=a("#"+c[0]+i),k;e.record(j);if(!c.html.attr("layer-full")){c.html.css("overflow","hidden").attr("layer-full",i)}clearTimeout(k);k=setTimeout(function(){var l=j.css("position")==="fixed";d.style(i,{top:l?0:g.scrollTop(),left:l?0:g.scrollLeft(),width:g.width(),height:g.height()});j.find(".layui-layer-min").hide()},100)};d.title=function(j,i){var k=a("#"+c[0]+(i||d.index)).find(c[1]);k.html(j)};d.close=function(m){var n=a("#"+c[0]+m),o=n.attr("type");if(!n[0]){return}if(o===e.type[1]&&n.attr("conType")==="object"){n.children(":not(."+c[5]+")").remove();for(var k=0;k<2;k++){n.find(".layui-layer-wrap").unwrap().hide()}}else{if(o===e.type[2]){try{var l=a("#"+c[4]+m)[0];l.contentWindow.document.write("");l.contentWindow.close();n.find("."+c[5])[0].removeChild(l)}catch(j){}}n[0].innerHTML="";n.remove()}a("#layui-layer-moves, #layui-layer-shade"+m).remove();d.ie6&&e.reselect();e.rescollbar(m);a(document).off("keydown",e.enter);typeof e.end[m]==="function"&&e.end[m]();delete e.end[m]};d.closeAll=function(i){a.each(a("."+c[0]),function(){var k=a(this);var j=i?(k.attr("type")===i):1;j&&d.close(k.attr("times"));j=null})};e.run=function(){a=jQuery;g=a(h);c.html=a("html");d.open=function(i){var j=new b(i);return j.index}};"function"===typeof define?define(function(){e.run();return d}):function(){e.run();d.use("skin/layer.css")}()}(window);